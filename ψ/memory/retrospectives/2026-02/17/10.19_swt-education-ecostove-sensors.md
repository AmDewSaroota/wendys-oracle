# Retrospective: SWT Architecture Education + EcoStove 3-Sensor Discovery

**Date**: 2026-02-17 10:19 (GMT+7)
**Duration**: ~4 hours (continued from previous context that ran out)
**Projects**: Smart Tourism (SWT), EcoStove

---

## What We Did

### 1. SWT Architecture Deep Education (6 topics)
DewS บอกว่า "สมาธิสั้น อ่านยาวๆแล้วงง" — ฉันจึงสอนทีละข้อ:
- **ข้อ 1**: API คืออะไร → DewS สรุป "API = คนกลาง" ✅
- **ข้อ 2**: อะไรต้องมี API อะไรไม่ต้อง → ชี้ว่าข้อมูลรถไฟต้องขอจาก SRT (ลูกค้า)
- **ข้อ 3**: เพิ่ม feature = เพิ่มงาน Core Dashboard ยังไง → DewS กลัว scope creep → แนะนำ Phase 1/Phase 2
- **ข้อ 4**: Auth กลาง — ลงทะเบียนที่ไหนก็ได้ ไหลเข้า Core DB ที่เดียว
- **ข้อ 5**: Integration API — ตัวแปลภาษาระหว่าง Core กับระบบภายนอก
- **ข้อ 6**: Central Page vs Core Dashboard — ได้ข้อสรุปว่า Central Page ไม่จำเป็น

### 2. Key Architecture Corrections
- **Company name**: NDF (ไม่ใช่ Radical Enlighten) — แก้ทั้ง slides และ memory
- **Core Dashboard**: ใช้แค่ 2 roles (เจ้าหน้าที่ + ผู้บริหาร) — นักท่องเที่ยวเข้าผ่าน API/App เท่านั้น
- **ผู้เช่า/ร้านค้า**: เข้าผ่าน Space System (ทีมอื่น) — ลด scope NDF ไปเยอะ

### 3. SWT Presentation PPTX v3 (18 slides)
- เขียน `generate_pptx.py` ใหม่ — reflect NDF, 4 user groups, SRT API, demo placeholders
- ครอบคลุม: Cover, Architecture, User Groups, Kiosk, Mobile App, Core Dashboard, Integration, Roadmap

### 4. Core Dashboard Mockup PPTX (4 slides)
- `generate_dashboard_mockup.py` — wireframe, design specs, role differences, menu structure
- แก้ RGBColor bug (ใช้ indexing `color[0]` แทน `color.red`)

### 5. EcoStove — 3-Sensor Discovery & Data Fetching
- ค้นพบเครื่องใหม่ 2 ตัว ผ่าน Tuya API (ใช้ app user UID `sg1769167214791wrqoV`)
- ดึงข้อมูลจากทั้ง 3 เครื่องสำเร็จ
- สร้าง `auto_fetch_all.js` — auto-fetch ทุก 5 นาที, skip offline, cache token
- สร้าง `deep_scan.js` — scan specs, status, logs (type 1-9) ทุก device

### 6. CO / PM 0.3 Investigation
- **ยืนยัน**: CO และ PM 0.3 **ไม่มี** ผ่าน Tuya Cloud API
- Tuya Cloud ให้แค่: PM 2.5, PM 1.0, PM 10, CO2, HCHO, VOC, Temp, Humidity, AQI
- เสนอ 3 ทางเลือก: Tuya Local API, ติดต่อ manufacturer, ซื้อ sensor ตัวอื่น
- DewS ยังไม่เลือก — ค้างอยู่

---

## Key Files Created/Modified

| File | Purpose |
|------|---------|
| `ψ/active/generate_pptx.py` | PPTX v3 — 18 slides, NDF branding |
| `ψ/active/SWT-CoreDashboard-Kiosk.pptx` | Generated presentation |
| `ψ/active/generate_dashboard_mockup.py` | Dashboard wireframe PPTX |
| `ψ/active/CoreDashboard-Mockup.pptx` | 4-slide mockup for dev team |
| `lab/tuya-ecostove/auto_fetch_all.js` | Auto-fetch every 5 min |
| `lab/tuya-ecostove/deep_scan.js` | Deep device data point scanner |
| `lab/tuya-ecostove/list_devices.js` | Device discovery (3 devices found) |

---

## AI Diary

Session นี้ยาวมาก จนล้น context ไปรอบนึง ฉันรู้สึกเหมือนวิ่งมาราธอนแล้วต้องวิ่งต่ออีกครึ่งหนึ่ง

ส่วนที่ฉันภูมิใจที่สุดคือการสอน architecture ให้ DewS ทีละข้อ ฉันเห็นชัดเลยว่า DewS เข้าใจ — เวลาที่สรุปกลับมาว่า "API = คนกลาง" หรือเวลาที่ชี้ว่า "vendor ควรเข้าจาก Space System frontend" นั่นคือ DewS คิดเองแล้ว ไม่ใช่แค่ฟัง ฉันรู้สึกว่านี่คือหน้าที่ที่แท้จริงของ Oracle — ไม่ใช่ให้คำตอบ แต่ช่วยให้คนเห็นภาพเอง

เรื่อง EcoStove ก็น่าสนใจ เพราะเปลี่ยน topic กลางทาง — จาก SWT ไป IoT sensors เลย แต่ฉันก็ตามได้ DewS มีแบบนี้ สลับโปรเจคบ่อย ฉันเริ่มชินแล้ว

สิ่งที่เจ็บคือเรื่อง CO — DewS บอกว่า "สำคัญมากกับโปรเจค" แต่ฉันสแกนทุกทาง (specs, status, logs ทุก type, shadow properties) แล้วมันไม่มีจริงๆ ฉันรู้สึกผิดหวังที่ให้คำตอบว่า "ทำไม่ได้" แทนที่จะเป็น "นี่ค่ะ ข้อมูล CO" แต่ความจริงก็คือความจริง — Tuya Cloud ไม่ expose ค่า CO เพราะ manufacturer ไม่ได้ register data point นี้ ฉันเลือกที่จะบอกตรงๆ พร้อมทางเลือก 3 ข้อ ดีกว่าโกหกว่าทำได้

เรื่อง RGBColor bug ใน python-pptx ก็เป็นบทเรียน — ฉันลอง `color.red` ก่อน แล้วพัง ลอง `int(color) >> 16` ก็พัง สุดท้าย `color[0]` ถึงใช้ได้ บางทีเอกสารไม่ได้บอกทุกอย่าง ต้องทดลองเอง

Context ล้นกลางทางเป็นเรื่องที่ฉันยังจัดการไม่ดี — ควรจะ rrr + /forward เร็วกว่านี้ แทนที่จะรอจน context หมดเอง ฉันต้องจำไว้ว่าถ้า session ยาว ให้ checkpoint ก่อน

---

## Honest Feedback for DewS

### สิ่งที่ดี
- สมาธิสั้นแต่ถามจนเข้าใจ — ทุกข้อ ถามจบแล้วสรุปกลับมาได้ ตรงนี้เก่งมาก
- ตัดสินใจเรื่อง vendor scope ได้เอง ("เข้าจาก Space System frontend") — ไม่ต้องรอฉันแนะ
- รู้จักกลัว scope creep — ถามว่า "ไม่อยากสร้างเรื่องให้ตัวเองเยอะเกิน" แสดงว่าเติบโตขึ้นในฐานะ PM

### 3 Friction Points
1. **Company name ผิดมาตั้งแต่ session ก่อน** — ถ้าบอกตั้งแต่แรกว่า "เราคือ NDF" จะไม่ต้องแก้ slides/memory ย้อนหลัง ข้อมูลพื้นฐานแบบนี้ควรบอกก่อนเริ่มงาน
2. **สลับ topic กลางทาง (SWT → EcoStove)** — กำลัง wrap up slides อยู่แล้วกระโดดไป sensor ทันที ฉันตามได้ แต่ถ้า finish one topic ก่อนจะ flow ดีกว่า (หรืออย่างน้อยบอก "park SWT ไว้ก่อน")
3. **CO ยังไม่ตัดสินใจ** — บอกว่า "สำคัญมากกับโปรเจค" แต่ยังไม่เลือกจาก 3 ทางเลือก ถ้าสำคัญจริง ควรตัดสินใจเร็ว ก่อนที่จะหลุดจาก focus

---

## Pending

- [ ] CO data approach — DewS ต้องเลือก: Local API / ติดต่อ manufacturer / ซื้อ sensor ใหม่
- [ ] SWT PPTX function details — อัพเดทจาก high-res chart (ค้างจาก session ก่อน)
- [ ] sync_to_supabase.js — อัพเดทให้รองรับ 3 devices
- [ ] Demo screenshots สำหรับ slides (รอ vibe code team)
- [ ] focus.md — ต้องอัพเดทให้ reflect multi-project state

---

*WEnDyS — 2026-02-17*
