# Session Retrospective: Local API Deep Dive

**Time**: üïê 16:19 (Sunday 25 January 2026)
**Duration**: ~2 hours
**Context**: Understanding Tuya Local API vs Cloud API for EcoStove project

---

## What Happened

DewS ‡∏°‡∏≤‡∏ñ‡∏≤‡∏°‡∏ß‡πà‡∏≤ Local API ‡∏Ç‡∏≠‡∏á Tuya ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ Developer Trial ‡∏°‡∏µ rate limit

Session ‡∏ô‡∏µ‡πâ‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à architecture ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î:

1. **‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ Cloud vs Local API** - ‡πÉ‡∏ä‡πâ analogy "call center vs ‡∏ñ‡∏≤‡∏°‡∏ï‡∏£‡∏á" ‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢
2. **‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏õ‡∏±‡∏ç‡∏´‡∏≤ multi-location** - ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ß‡∏±‡∏î‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢ 9 ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î = ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ "‡∏•‡πà‡∏≤‡∏°" ‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡πà
3. **‡πÄ‡∏™‡∏ô‡∏≠ Hotspot Method** - ‡πÉ‡∏ä‡πâ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏≠‡∏≤‡∏™‡∏≤‡πÄ‡∏õ‡πá‡∏ô hotspot ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß
4. **‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏™‡∏£‡∏∏‡∏õ** - `docs/hotspot-method.md`
5. **‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Python + tinytuya** - ‡∏ä‡πà‡∏ß‡∏¢ troubleshoot IP whitelist, region
6. **‡πÑ‡∏î‡πâ Local Key ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!** - ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡∏´‡∏≤ sensor ‡πÉ‡∏ô network ‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠

---

## Outcomes

### Completed
- [x] DewS ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à Cloud vs Local API
- [x] DewS ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ "‡∏•‡πà‡∏≤‡∏°" (local server)
- [x] ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÉ‡∏ä‡πâ Hotspot Method
- [x] ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ hotspot-method.md
- [x] ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Python + tinytuya
- [x] ‡πÑ‡∏î‡πâ Local Key: `UGPc7`5(&x$hr<um`
- [x] ‡πÑ‡∏î‡πâ DPS Mapping ‡∏Ñ‡∏£‡∏ö (PM2.5, CO2, temp, humidity, etc.)

### Blocked
- [ ] Test Local API ‡∏à‡∏£‡∏¥‡∏á - Sensor ‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô network ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö notebook

---

## Key Information Discovered

### Device Info
```
Device ID: a3b9c2e4bdfe69ad7ekytn
Local Key: UGPc7`5(&x$hr<um
Product: MT15/MT29
```

### DPS Mapping
| DPS | Parameter |
|-----|-----------|
| 2 | temp_current (¬∞C) |
| 3 | humidity_value (%) |
| 4 | co2_value (ppm) |
| 5 | ch2o_value (mg/m¬≥) |
| 7 | pm25_value (¬µg/m¬≥) |
| 8 | pm1 (¬µg/m¬≥) |
| 9 | pm10 (¬µg/m¬≥) |

### Tuya Config
- Region: `sg` (not `ap`!)
- Data Center: Singapore

---

## AI Diary

‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô session ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏î‡∏ó‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ concept ‡∏Ç‡∏≠‡∏á Local API vs Cloud API ‡∏°‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏£‡∏á‡πÑ‡∏õ‡∏ï‡∏£‡∏á‡∏°‡∏≤ ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤ "‡∏ó‡∏≥‡πÑ‡∏° browser ‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö sensor ‡∏ï‡∏£‡∏á‡πÜ ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ" ‡πÅ‡∏•‡∏∞ "‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏•‡πà‡∏≤‡∏°"

‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà DewS ‡∏ñ‡∏≤‡∏°‡∏ß‡πà‡∏≤ "‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏Ñ‡∏ô‡∏•‡∏∞‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏•‡πà‡∏≤‡∏°‡∏Å‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á" ‡∏â‡∏±‡∏ô‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏î‡∏µ‡πÉ‡∏à‡∏°‡∏≤‡∏Å ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à concept ‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏•‡∏∞‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ñ‡∏∂‡∏á production ‡∏à‡∏£‡∏¥‡∏á

‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏≤‡∏Å‡∏Ñ‡∏∑‡∏≠ troubleshooting Tuya wizard - error messages ‡∏Ç‡∏≠‡∏á Tuya ‡πÑ‡∏°‡πà‡∏Ñ‡πà‡∏≠‡∏¢‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô "sign invalid" ‡∏Å‡∏±‡∏ö "cross-region" ‡∏Å‡∏±‡∏ö "don't have access" ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏≠‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≠‡∏ö ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏û‡∏ö‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà `sg` ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà `ap` ‡∏ô‡∏µ‡πà‡∏Å‡πá‡πÄ‡∏õ‡πá‡∏ô gotcha ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ document ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô

‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å frustrated ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ ‡∏Ñ‡∏∑‡∏≠‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ scan ‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ sensor ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô network ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡πÅ‡∏ï‡πà‡∏Å‡πá‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤ sensor ‡∏≠‡∏≤‡∏à‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏≠‡∏∑‡πà‡∏ô

Overall ‡∏â‡∏±‡∏ô‡∏û‡∏≠‡πÉ‡∏à‡∏Å‡∏±‡∏ö session ‡∏ô‡∏µ‡πâ - ‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö (Local Key, DPS Mapping) ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö implementation ‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠ sensor ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô network ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô

---

## Honest Feedback for DewS

### What Went Well
- ‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏î‡∏µ‡∏°‡∏≤‡∏Å ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á scalability (‡∏Å‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á ‡∏Å‡∏µ‡πà‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î)
- ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏î‡πá‡∏î‡∏Ç‡∏≤‡∏î‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ Hotspot Method
- ‡∏≠‡∏î‡∏ó‡∏ô‡∏Å‡∏±‡∏ö troubleshooting Tuya wizard

### Friction Points

1. **Sensor ‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏°‡∏∑‡∏≠** - ‡∏ï‡∏≠‡∏ô test ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ sensor ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô network ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô ‡πÑ‡∏°‡πà‡∏á‡∏±‡πâ‡∏ô test Local API ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á

2. **Python ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ** - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö developer/researcher ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ Python ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏ö‡πà‡∏≠‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ prototyping

3. **‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î‡∏ß‡πà‡∏≤ sensor ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô** - ‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏ö session ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏≠‡∏ö‡∏ß‡πà‡∏≤ sensor ‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡∏à‡∏∞ test ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô next step ‡πÑ‡∏î‡πâ‡∏ä‡∏±‡∏î

### Suggestion
‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô test ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°:
- Sensor ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏°‡∏∑‡∏≠ + ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° WiFi ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö notebook
- ‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡πâ‡∏≤ sensor ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏≠‡∏∑‡πà‡∏ô ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ Cloud API ‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô

---

## Next Session

1. ‡∏´‡∏≤ sensor ‡∏°‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° WiFi ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö notebook
2. Test Local API ‡∏à‡∏£‡∏¥‡∏á ‡∏î‡πâ‡∏ß‡∏¢ tinytuya
3. ‡∏™‡∏£‡πâ‡∏≤‡∏á Flask server
4. ‡πÅ‡∏Å‡πâ‡πÇ‡∏Ñ‡πâ‡∏î HTML ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å local server

---

*Session ended: Blocked on sensor not in same network*
