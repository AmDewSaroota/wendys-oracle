# Tuya Cloud API — การคำนวณ Usage สำหรับ EcoStove

> เอกสารประกอบการตัดสินใจ
> สร้าง: 2026-01-26

---

## Tuya Trial Edition Limits

| รายการ | Limit |
|--------|-------|
| API Calls | 26,000 ครั้ง/เดือน |
| Messages | 68,000 ข้อความ/เดือน |
| Devices | 50 เครื่อง |
| เชิงพาณิชย์/วิจัย | ❌ ห้าม |

---

## สมมติฐานการเก็บข้อมูล

| รายการ | ค่า |
|--------|-----|
| ความถี่ต่อวัน | 2 ครั้ง (เช้า-เย็น) |
| ระยะเวลาต่อครั้ง | 3 ชั่วโมง |
| ช่วงเวลาเก็บ | ทุก 5 นาที |

---

## การคำนวณ

### ต่อ 1 บ้าน

```
1 session    = 3 ชม. = 180 นาที
Data points  = 180 ÷ 5 = 36 ครั้ง/session

1 วัน        = 2 sessions × 36 = 72 API calls
1 เดือน      = 30 วัน × 72 = 2,160 API calls
```

**สรุป: 1 บ้าน ใช้ 2,160 API calls/เดือน**

---

## ตารางเปรียบเทียบ

| จำนวนบ้าน | API Calls/เดือน | % ของ Limit | สถานะ |
|-----------|-----------------|-------------|-------|
| 5 บ้าน | 10,800 | 42% | ✅ ปลอดภัย |
| 10 บ้าน | 21,600 | 83% | ⚠️ ระวัง |
| 12 บ้าน | 25,920 | 99.7% | ⚠️ เกือบเต็ม |
| 13 บ้าน | 28,080 | 108% | ❌ เกิน |
| 20 บ้าน | 43,200 | 166% | ❌ เกิน |
| 30 บ้าน | 64,800 | 249% | ❌ เกิน |

---

## ขีดจำกัดสูงสุด

```
┌─────────────────────────────────────────┐
│                                         │
│   ด้วยเงื่อนไขนี้:                       │
│   เก็บได้สูงสุด 12 บ้าน                 │
│                                         │
└─────────────────────────────────────────┘
```

---

## ทางเลือกเพิ่มจำนวนบ้าน

| ปรับอะไร | จากเดิม | เป็น | ได้กี่บ้าน |
|----------|---------|------|-----------|
| ความถี่เก็บ | ทุก 5 นาที | ทุก 10 นาที | 24 บ้าน |
| ครั้งต่อวัน | 2 ครั้ง | 1 ครั้ง | 24 บ้าน |
| ระยะเวลา | 3 ชม. | 2 ชม. | 18 บ้าน |
| รวมทุกอย่าง | - | 10 นาที, 1 ครั้ง, 2 ชม. | 72 บ้าน |

---

## สูตรคำนวณ

```
API calls/เดือน = (นาทีต่อ session ÷ ช่วงเก็บ) × ครั้งต่อวัน × 30 วัน × จำนวนบ้าน

จำนวนบ้านสูงสุด = 26,000 ÷ ((นาทีต่อ session ÷ ช่วงเก็บ) × ครั้งต่อวัน × 30)
```

---

## ข้อควรพิจารณาเพิ่มเติม

1. **ยังไม่รวม overhead** — การ login, refresh token, error retry อาจใช้ API เพิ่ม
2. **Trial ห้ามใช้วิจัย** — อาจผิด TOS ของ Tuya
3. **ถ้าเกิน quota** — ระงับบริการทันที ไม่มีเตือน

---

## ทางออก

| ทางเลือก | ข้อดี | ข้อเสีย |
|----------|-------|---------|
| ลดจำนวนบ้าน | ง่าย, ไม่มีค่าใช้จ่าย | ได้ sample น้อย |
| ลดความถี่เก็บ | ง่าย | ข้อมูลละเอียดน้อยลง |
| ใช้ Local API | ไม่มี limit | ต้องมี WiFi ทุกบ้าน |
| ซื้อ Flagship | ไม่มี limit | ~$25,000/ปี |

---

*สร้างโดย WEnDyS Oracle*
*สำหรับโปรเจค EcoStove*
